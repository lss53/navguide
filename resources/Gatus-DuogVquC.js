import{_ as f,s as g,r as v,c as G,o as n,w as p,b as h,d as c,n as w,t as i,a as o,e as d,F as m}from"./index-B-LM16Ha.js";const N={name:"Gatus",mixins:[g],props:{item:Object},data:()=>({up:0,down:0,total:0,avgRespTime:NaN,percentageGood:NaN,status:!1,statusMessage:!1}),created(){const t=parseInt(this.item.updateInterval,10)||0;t>0&&setInterval(()=>this.fetchStatus(),t),this.fetchStatus()},methods:{fetchStatus:async function(){this.fetch("/api/v1/endpoints/statuses",{method:"GET",cache:"no-cache"}).then(t=>{this.item.groups&&(t=t?.filter(a=>this.item.groups.includes(a.group)===!0)),this.total=t.length,this.up=0;let s=0,e=0;t.forEach(a=>{if(a.results[a.results.length-1].success===!0&&this.up++,this.item.hideaverages)s=0,e=1;else{let l=0,r=0;a.results.forEach(u=>{l+=parseInt(u.duration,10)/1e3,r++}),s+=l,e+=r}}),this.down=this.total-this.up,this.avgRespTime=(s/e).toFixed(2),this.up==0||this.total==0?this.percentageGood=0:this.percentageGood=Math.round(this.up/this.total*100),this.up==0&&this.down==0?this.status=!1:this.down==this.total?this.status="bad":this.up==this.total?this.status="good":this.status="warn"}).catch(t=>{console.error(t)})}}},k={class:"title is-4"},I={class:"subtitle is-6"};function T(t,s,e,a,l,r){const u=v("Generic");return n(),G(u,{item:e.item},{content:p(()=>[o("p",k,i(e.item.name),1),o("p",I,[e.item.subtitle?(n(),h(m,{key:0},[d(i(e.item.subtitle),1)],64)):c("",!0),s[2]||(s[2]=o("i",{class:"fa-solid fa-signal"},null,-1)),d(" "+i(t.up)+"/"+i(t.total)+" ",1),t.avgRespTime>0?(n(),h(m,{key:1},[s[0]||(s[0]=o("span",{class:"separator"}," | ",-1)),s[1]||(s[1]=o("i",{class:"fa-solid fa-stopwatch"},null,-1)),d(" "+i(t.avgRespTime)+" ms avg. ",1)],64)):c("",!0)])]),indicator:p(()=>[t.status!==!1?(n(),h("div",{key:0,class:w(["status",t.status])},i(t.percentageGood)+"% ",3)):c("",!0)]),_:1},8,["item"])}const _=f(N,[["render",T],["__scopeId","data-v-27fe3cce"]]);export{_ as default};

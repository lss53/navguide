import{_ as c,s as d,r as l,c as u,o as s,w as f,a as h,b as r,d as a,t as o}from"./index-B-LM16Ha.js";const m={name:"Scrutiny",mixins:[d],props:{item:Object},data:()=>({passed:null,failed:null,unknown:null,serverError:!1}),created:function(){const e=parseInt(this.item.updateInterval,10)||0;e>0&&setInterval(()=>this.fetchSummary(),e),this.fetchSummary()},methods:{fetchSummary:function(){this.fetch("/api/summary").then(e=>{const n=Object.values(e.data.summary);this.passed=n.filter(t=>t.device.device_status===0)?.length||0,this.failed=n.filter(t=>t.device.device_status>0&&t.device.device_status<=3)?.length||0,this.unknown=n.length-(this.passed+this.failed)||0}).catch(e=>{console.error(e),this.serverError=!0})}}},p={class:"notifs"},_={key:0,class:"notif passed",title:"Passed"},v={key:1,class:"notif failed",title:"Failed"},y={key:2,class:"notif unknown",title:"Unknown"},k={key:3,class:"notif errors",title:"Connection error to Scrutiny API, check your url in config.yml"};function g(e,n,t,w,S,I){const i=l("Generic");return s(),u(i,{item:t.item},{indicator:f(()=>[h("div",p,[e.passed>0?(s(),r("strong",_,o(e.passed),1)):a("",!0),e.failed>0?(s(),r("strong",v,o(e.failed),1)):a("",!0),e.unknown>0?(s(),r("strong",y,o(e.unknown),1)):a("",!0),e.serverError?(s(),r("strong",k,"?")):a("",!0)])]),_:1},8,["item"])}const B=c(m,[["render",g],["__scopeId","data-v-0316afbb"]]);export{B as default};
